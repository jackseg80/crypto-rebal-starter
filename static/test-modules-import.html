<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Modules Import</title>
    <style>
        body { font-family: monospace; padding: 20px; }
        .test-result { margin: 10px 0; padding: 8px; border-radius: 4px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .loading { background: #fff3cd; color: #856404; }
    </style>
</head>
<body>
    <h1>üß™ Test des Imports ES6 Modules</h1>
    <div id="results"></div>

    <script type="module">
        const results = document.getElementById('results');
        
        function addResult(name, status, message) {
            const div = document.createElement('div');
            div.className = `test-result ${status}`;
            div.innerHTML = `<strong>${name}:</strong> ${message}`;
            results.appendChild(div);
        }
        
        addResult('Initial load', 'loading', 'Testing module imports...');
        
        try {
            // Test 1: unified-insights-v2.js
            addResult('unified-insights-v2.js', 'loading', 'Importing...');
            const v2Module = await import('./core/unified-insights-v2.js');
            console.log('unified-insights-v2 loaded:', v2Module);
            addResult('unified-insights-v2.js', 'success', `Loaded - exports: ${Object.keys(v2Module).join(', ')}`);
            
            // Test 2: strategy-api-adapter.js
            addResult('strategy-api-adapter.js', 'loading', 'Importing...');
            const adapterModule = await import('./core/strategy-api-adapter.js');
            console.log('strategy-api-adapter loaded:', adapterModule);
            addResult('strategy-api-adapter.js', 'success', `Loaded - exports: ${Object.keys(adapterModule).join(', ')}`);
            
            // Test 3: MigrationControls.js
            addResult('MigrationControls.js', 'loading', 'Importing...');
            const controlsModule = await import('./components/MigrationControls.js');
            console.log('MigrationControls loaded:', controlsModule);
            addResult('MigrationControls.js', 'success', `Loaded - exports: ${Object.keys(controlsModule).join(', ')}`);
            
            // Test 4: StrategyConfig functionality
            addResult('StrategyConfig', 'loading', 'Testing configuration...');
            const { StrategyConfig } = adapterModule;
            StrategyConfig.setEnabled(true);
            StrategyConfig.setDebugMode(true);
            const config = StrategyConfig.getConfig();
            console.log('StrategyConfig test:', config);
            addResult('StrategyConfig', 'success', `Configured - enabled: ${config.enabled}, debug: ${config.debug_mode}`);
            
            // Test 5: getUnifiedState V2
            addResult('getUnifiedState V2', 'loading', 'Testing function call...');
            const { getUnifiedState } = v2Module;
            const state = await getUnifiedState();
            console.log('Unified state V2:', state);
            addResult('getUnifiedState V2', 'success', `Score: ${state?.decision?.score || 'N/A'}, Source: ${state?.intelligence?.migration_status || 'unknown'}`);
            
        } catch (error) {
            console.error('‚ùå Module import test failed:', error);
            addResult('Import test', 'error', `FAILED: ${error.message}`);
            addResult('Stack trace', 'error', error.stack);
        }
    </script>
</body>
</html>