<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Setup Flyout Feature Flag</title>
  <link rel="stylesheet" href="shared-theme.css">
  <style>
    body {
      padding: 2rem;
      max-width: 600px;
      margin: 0 auto;
    }
    .card {
      background: var(--theme-surface);
      padding: 2rem;
      border-radius: 8px;
      box-shadow: var(--shadow-md);
      border: 1px solid var(--theme-border);
    }
    h1 {
      color: var(--theme-text);
      margin-bottom: 1rem;
    }
    .status {
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 4px;
      font-weight: 600;
    }
    .status.enabled {
      background: color-mix(in oklab, var(--success) 20%, transparent);
      border: 1px solid var(--success);
      color: var(--success);
    }
    .status.disabled {
      background: color-mix(in oklab, var(--warning) 20%, transparent);
      border: 1px solid var(--warning);
      color: var(--warning);
    }
    button {
      background: var(--brand-primary);
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      margin-right: 0.5rem;
    }
    button:hover {
      opacity: 0.9;
    }
    .test-links {
      margin-top: 2rem;
      padding-top: 2rem;
      border-top: 1px solid var(--theme-border);
    }
    .test-links a {
      display: block;
      padding: 0.5rem;
      margin: 0.5rem 0;
      color: var(--brand-primary);
      text-decoration: none;
    }
    .test-links a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>🔧 Flyout Panel Setup</h1>

    <div id="status" class="status"></div>

    <p>Le flyout panel nécessite un feature flag dans localStorage :</p>
    <code>localStorage.setItem('__ui.flyout.enabled', '1')</code>

    <div style="margin-top: 1.5rem;">
      <button onclick="enableFlyout()">✅ Enable Flyout</button>
      <button onclick="disableFlyout()" style="background: var(--danger);">❌ Disable Flyout</button>
      <button onclick="checkStatus()">🔍 Check Status</button>
    </div>

    <div class="test-links">
      <h3>Test Pages (avec Risk Sidebar Flyout) :</h3>
      <a href="/static/analytics-unified.html" target="_blank">📊 Analytics Unified</a>
      <a href="/static/rebalance.html" target="_blank">⚖️ Rebalance</a>
      <a href="/static/archive/demos/execution.html" target="_blank">🚀 Execution</a>
      <a href="/static/risk-dashboard.html" target="_blank">🎯 Risk Dashboard (sidebar statique)</a>
    </div>
  </div>

  <script>
    function enableFlyout() {
      localStorage.setItem('__ui.flyout.enabled', '1');
      checkStatus();
      console.log('✅ Flyout enabled!');
    }

    function disableFlyout() {
      localStorage.removeItem('__ui.flyout.enabled');
      checkStatus();
      console.log('❌ Flyout disabled!');
    }

    function checkStatus() {
      const enabled = localStorage.getItem('__ui.flyout.enabled') === '1';
      const statusEl = document.getElementById('status');

      if (enabled) {
        statusEl.className = 'status enabled';
        statusEl.textContent = '✅ Flyout is ENABLED';
      } else {
        statusEl.className = 'status disabled';
        statusEl.textContent = '⚠️ Flyout is DISABLED';
      }
    }

    // Check on load
    checkStatus();
  </script>
</body>
</html>
