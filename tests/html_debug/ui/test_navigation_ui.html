<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Navigation UI - Crypto Rebalancer</title>
    
    <script src="static/global-config.js"></script>
    <script src="static/shared-header.js"></script>
    
    <style>
        :root {
            --bg: #0a0f14;
            --card: #0e1620;
            --muted: #8fa0b3;
            --text: #e7eef7;
            --accent: #2dd4bf;
            --border: #1f2b3a;
        }

        * { box-sizing: border-box; }
        
        body {
            background: var(--bg);
            color: var(--text);
            font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }

        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .test-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 20px;
            margin: 20px 0;
        }

        h2 {
            color: var(--accent);
            margin-bottom: 16px;
        }

        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 16px;
            margin: 16px 0;
        }

        .page-link {
            display: block;
            padding: 12px 16px;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            text-decoration: none;
            color: var(--text);
            transition: all 0.2s;
        }

        .page-link:hover {
            border-color: var(--accent);
            color: var(--accent);
        }

        .section-analytics {
            border-left: 4px solid #3b82f6;
        }

        .section-engine {
            border-left: 4px solid #f97316;
        }

        .test-result {
            padding: 12px;
            border-radius: 8px;
            margin: 8px 0;
            font-family: monospace;
            font-size: 14px;
        }

        .success {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid #22c55e;
            color: #22c55e;
        }

        .error {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid #ef4444;
            color: #ef4444;
        }
    </style>
</head>

<body>
    <!-- Header sera inject√© par shared-header.js -->

    <div class="test-container">
        <div class="test-card">
            <h2>üß™ Test de Navigation UI Unifi√©</h2>
            <p>Cette page teste la nouvelle navigation bi-section avec toutes les pages int√©gr√©es.</p>
            
            <div id="test-results"></div>
        </div>

        <div class="test-card">
            <h2>üìä Section Analytics & Decisions</h2>
            <p>Interface "business/utilisateur" - Couleurs bleues/vertes</p>
            
            <div class="test-grid">
                <a href="static/dashboard.html" class="page-link section-analytics">
                    üìä Dashboard
                    <br><small>Vue d'ensemble portfolio et m√©triques</small>
                </a>
                <a href="static/rebalance.html" class="page-link section-analytics">
                    ‚öñÔ∏è Rebalance
                    <br><small>Planification et strat√©gies</small>
                </a>
                <a href="static/alias-manager.html" class="page-link section-analytics">
                    üè∑Ô∏è Aliases
                    <br><small>Gestion des mappings</small>
                </a>
                <a href="static/settings.html" class="page-link section-analytics">
                    ‚öôÔ∏è Settings
                    <br><small>Configuration globale</small>
                </a>
            </div>
        </div>

        <div class="test-card">
            <h2>üîß Section Execution Engine & Diagnostics</h2>
            <p>Interface "technique/op√©rationnelle" - Couleurs oranges/rouges</p>
            
            <div class="test-grid">
                <a href="static/execution.html" class="page-link section-engine">
                    üöÄ Execute
                    <br><small>Moteur d'ex√©cution d'ordres</small>
                </a>
                <a href="static/execution_history.html" class="page-link section-engine">
                    üìà History
                    <br><small>Analytics post-ex√©cution</small>
                </a>
                <a href="static/monitoring_advanced.html" class="page-link section-engine">
                    üîç Monitor
                    <br><small>√âtat syst√®me et connexions</small>
                </a>
            </div>
        </div>

        <div class="test-card">
            <h2>üéØ Workflow Typique</h2>
            <p>Navigation logique recommand√©e :</p>
            <ol style="color: var(--muted); line-height: 1.8;">
                <li><strong>Dashboard</strong> ‚Üí comprendre la situation portfolio</li>
                <li><strong>Rebalance</strong> ‚Üí planifier les actions n√©cessaires</li>
                <li><strong>Execute</strong> ‚Üí ex√©cuter le plan g√©n√©r√©</li>
                <li><strong>History</strong> ‚Üí analyser les r√©sultats</li>
                <li><strong>Monitor</strong> ‚Üí surveiller l'√©tat syst√®me</li>
            </ol>
        </div>
    </div>

    <script>
        // Tests de navigation
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üß™ Tests navigation UI initialis√©');
            
            // Simuler diff√©rentes pages pour tester la navigation
            const testPages = ['dashboard', 'rebalance', 'execution', 'execution-history', 'monitoring'];
            
            // Initialiser le header avec un ID de test
            initSharedHeader('dashboard', { showConfigIndicators: true });
            
            runNavigationTests();
        });

        function runNavigationTests() {
            const resultsContainer = document.getElementById('test-results');
            let results = [];

            // Test 1: V√©rifier que le header est inject√©
            const header = document.querySelector('header');
            if (header) {
                results.push({type: 'success', message: '‚úÖ Header partag√© correctement inject√©'});
            } else {
                results.push({type: 'error', message: '‚ùå Header partag√© non trouv√©'});
            }

            // Test 2: V√©rifier les sections de navigation
            const analyticsSection = document.querySelector('.analytics-section');
            const engineSection = document.querySelector('.engine-section');
            
            if (analyticsSection && engineSection) {
                results.push({type: 'success', message: '‚úÖ Sections Analytics et Engine d√©tect√©es'});
            } else {
                results.push({type: 'error', message: '‚ùå Sections de navigation manquantes'});
            }

            // Test 3: V√©rifier les liens de navigation
            const navLinks = document.querySelectorAll('.nav-link');
            if (navLinks.length >= 7) {
                results.push({type: 'success', message: `‚úÖ ${navLinks.length} liens de navigation trouv√©s`});
            } else {
                results.push({type: 'error', message: `‚ùå Seulement ${navLinks.length} liens trouv√©s (attendu: 7)`});
            }

            // Test 4: V√©rifier le CSS des sections
            const analyticsLinks = document.querySelectorAll('.section-analytics .nav-link');
            const engineLinks = document.querySelectorAll('.section-engine .nav-link');
            
            if (analyticsLinks.length > 0 && engineLinks.length > 0) {
                results.push({type: 'success', message: '‚úÖ Diff√©renciation CSS par section active'});
            } else {
                results.push({type: 'error', message: '‚ùå Diff√©renciation CSS par section manquante'});
            }

            // Test 5: V√©rifier les functions globales
            if (typeof initSharedHeader === 'function' && typeof globalConfig !== 'undefined') {
                results.push({type: 'success', message: '‚úÖ Fonctions globales disponibles'});
            } else {
                results.push({type: 'error', message: '‚ùå Fonctions globales manquantes'});
            }

            // Afficher les r√©sultats
            resultsContainer.innerHTML = results.map(result => 
                `<div class="test-result ${result.type}">${result.message}</div>`
            ).join('');

            // R√©sum√©
            const successCount = results.filter(r => r.type === 'success').length;
            const totalCount = results.length;
            
            resultsContainer.innerHTML += `
                <div class="test-result ${successCount === totalCount ? 'success' : 'error'}" style="margin-top: 16px; font-weight: bold;">
                    üìä R√©sum√©: ${successCount}/${totalCount} tests r√©ussis
                    ${successCount === totalCount ? ' - Navigation UI op√©rationnelle! üéâ' : ' - Quelques probl√®mes d√©tect√©s'}
                </div>
            `;
        }
    </script>
</body>
</html>